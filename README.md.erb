<%
  def without_comments(string)
    stripped = string.lines.reject { |line| line =~ /\s*\/\// }.join
    IO.popen("rustfmt", "w+") do |pipe|
      pipe.puts stripped
      pipe.close_write
      pipe.read.strip
    end
  end
%>
# Draco

> Draco is a Rust library to build client side web applications with Web
> Assembly.

> [Live Examples with Annotated Source](https://draco-examples.netlify.com/) |
> [Starter](https://github.com/utkarshkukreti/draco-starter)

## Overview

The "Hello, World!" of Draco looks like this:

```rust
<%= without_comments(File.read("examples/hello_world/src/lib.rs").strip) %>
```

and the popular "Counter" application:

```rust
<%= without_comments(File.read("examples/counter/src/lib.rs").strip) %>
```

## Explanation

Here are the two same examples above, with comments explaining everything.

```rust
// examples/hello_world/src/lib.rs
<%= File.read("examples/hello_world/src/lib.rs").strip %>
```

```rust
// examples/counter/src/lib.rs
<%= File.read("examples/counter/src/lib.rs").strip %>
```
